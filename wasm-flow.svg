<svg viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
  <!-- Define styles -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="white"/>
    </marker>
  </defs>

  <!-- Step 1: Compilation -->
  <rect x="50" y="50" width="150" height="80" fill="#2d1b4d" rx="5"/>
  <text x="70" y="90" fill="white" font-family="Arial" font-size="14">Compiled Code</text>
  <text x="75" y="110" fill="#aaa" font-family="Arial" font-size="12">.wasm file</text>

  <!-- Step 2: Modus Environment -->
  <rect x="300" y="30" width="200" height="120" fill="#432b72" rx="5"/>
  <text x="320" y="60" fill="white" font-family="Arial" font-size="14">Modus Environment</text>
  <rect x="320" y="80" width="160" height="50" fill="#2d1b4d" rx="5"/>
  <text x="330" y="110" fill="white" font-family="Arial" font-size="12">GraphQL Endpoint</text>

  <!-- Step 3: Client Request -->
  <rect x="50" y="200" width="150" height="80" fill="#2d1b4d" rx="5"/>
  <text x="70" y="240" fill="white" font-family="Arial" font-size="14">Client Request</text>
  <text x="75" y="260" fill="#aaa" font-family="Arial" font-size="12">HTTP/GraphQL</text>

  <!-- WebAssembly Sandbox Container -->
  <rect x="300" y="180" width="550" height="270" fill="#1a1a1a" rx="10"/>
  <text x="320" y="210" fill="white" font-family="Arial" font-size="16">WebAssembly Sandbox</text>

  <!-- Wazero Runtime Container -->
  <rect x="320" y="230" width="510" height="200" fill="#2d1b4d" rx="5"/>
  <text x="335" y="255" fill="white" font-family="Arial" font-size="14">Wazero Runtime</text>

  <!-- Inside Wazero Runtime -->
  <!-- Instance Creation -->
  <rect x="335" y="270" width="150" height="70" fill="#432b72" rx="5"/>
  <text x="350" y="300" fill="white" font-family="Arial" font-size="12">New WASM Instance</text>
  <text x="350" y="320" fill="#aaa" font-family="Arial" font-size="10">Per Request</text>

  <!-- Memory Allocation -->
  <rect x="500" y="270" width="150" height="70" fill="#432b72" rx="5"/>
  <text x="515" y="300" fill="white" font-family="Arial" font-size="12">Linear Memory</text>
  <text x="515" y="320" fill="#aaa" font-family="Arial" font-size="10">Fresh Allocation</text>

  <!-- Function Execution -->
  <rect x="665" y="270" width="150" height="70" fill="#432b72" rx="5"/>
  <text x="680" y="300" fill="white" font-family="Arial" font-size="12">Function Execution</text>
  <text x="680" y="320" fill="#aaa" font-family="Arial" font-size="10">Isolated & Secure</text>

  <!-- Security Notes -->
  <text x="335" y="385" fill="#aaa" font-family="Arial" font-size="12">Security & Isolation Guarantees</text>
  <text x="335" y="410" fill="#aaa" font-family="Arial" font-size="12">Resource & Memory Controls</text>

  <!-- Arrows -->
  <!-- Compilation to Modus -->
  <path d="M200 90 L300 90" stroke="white" fill="none" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Client to Runtime -->
  <path d="M200 240 L300 240" stroke="white" fill="none" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Instance Creation Flow -->
  <path d="M485 305 L500 305" stroke="white" fill="none" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M650 305 L665 305" stroke="white" fill="none" stroke-width="2" marker-end="url(#arrowhead)"/>
</svg>
